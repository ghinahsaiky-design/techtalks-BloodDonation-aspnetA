@{
    // This is a top-level layout, it should not use any parent layout
    Layout = null;

    var pageTitle = ViewData["Title"] as string ?? "Admin Dashboard";
}

<!DOCTYPE html>
<html class="light" lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>@pageTitle - BloodConnect</title>

    <!-- Tailwind CDN with plugins -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

    <!-- Fonts -->
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" />
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" />

    <!-- Material Symbols configuration -->
    <style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }
    </style>

    <!-- Tailwind config (same as in your old Index.cshtml) -->
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#d70427",
                        "background-light": "#f8f5f6",
                        "background-dark": "#230f12",
                        "blue-700": "#1E40AF",
                        "gray-100": "#F3F4F6",
                        "gray-800": "#1F2937",
                        "gray-500": "#6B7280",
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.25rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "full": "9999px"
                    }
                }
            }
        };
    </script>

    @* Optional page-specific styles *@
    @RenderSection("Styles", required: false)
</head>

<body class="font-display bg-background-light dark:bg-background-dark text-gray-800 dark:text-gray-100">
    <div class="relative flex min-h-screen w-full flex-row group/design-root">

        @* LEFT SIDEBAR *@
        @Html.Partial("_Sidebar")

        @* RIGHT SIDE: HEADER + MAIN CONTENT *@
        <div class="flex flex-1 flex-col min-h-screen bg-background-light/50 dark:bg-background-dark">

            <!-- Sticky top header, copied from your old Index.cshtml -->
            <header class="flex items-center justify-between whitespace-nowrap bg-white/80 dark:bg-background-dark px-10 py-3 sticky top-0 z-10 shadow-sm">
                <div class="flex items-center gap-4 text-gray-800 dark:text-white">

                    @if (IsSectionDefined("PageHeader"))
                    {
                        @RenderSection("PageHeader")
                    }
                    else
                    {
                        var headerTitle = ViewData["Title"] as string ?? "Dashboard Overview";

                        <h2 class="text-lg font-bold leading-tight tracking-[-0.015em]">
                            @headerTitle
                        </h2>
                    }

                </div>

                <div class="flex flex-1 justify-end gap-4 items-center">
                    <button class="flex max-w-[480px] cursor-pointer items-center justify-center gap-2 rounded-full border border-gray-200 bg-white px-3 py-1.5 text-sm text-gray-600 shadow-sm hover:bg-gray-50 dark:bg-background-dark dark:border-white/10 dark:text-gray-100">
                        <span class="material-symbols-outlined text-base">notifications</span>
                    </button>

                    <img src="~/images/BloodDonationLogo.png"
                         alt="Admin user avatar"
                         class="size-10 rounded-full object-cover" />
                </div>
            </header>

            <!-- MAIN CONTENT COMING FROM EACH VIEW -->
            <main class="flex-1 p-6 md:p-8 lg:p-10 bg-background-light/50 dark:bg-background-dark">
                @RenderBody()
            </main>
        </div>
    </div>

    @* Global dashboard JS (if you have one) *@
    <script src="~/js/dashboard.js"></script>

    @* Optional page-specific scripts *@
    @RenderSection("Scripts", required: false)
</body>
</html>
